// ============================================================
// validators.js
// 「入力が変じゃないか？」だけを専門にチェックするファイル
// アナロジー：レストランの『注文用紙チェック係（品質管理）』
// ============================================================

/**
 * 年収が正しく入力されているかをチェックする関数
 * 
 * @param {string} income - 入力欄から取ってきた年収（まだ文字列）
 * @returns {{ valid: boolean, error: string | null }}
 * 
 * ざっくり言うと：
 *   - ちゃんと書いてある？（空白じゃない？）
 *   - 数字としておかしくない？
 *   - 0より大きい？
 * というのを見て、「OKかどうか」と「ダメならその理由」を返す係
 */
function validateIncome(income) {
    // 入力されたものを「数値」に変換してみる（"400" → 400）
    const num = Number(income);

    // ① 何も書いてない（空欄）のチェック
    // 例：注文用紙を出したのに、何も書いてない状態
    if (!income || income === '') {
        return {
            valid: false,
            error: '年収を入力してください'
        };
    }

    // ② 数字として変（NaN）だったり、無限大（Infinity）だったりしないか
    // 例：よく分からない文字を書いてきた注文用紙
    if (isNaN(num) || !isFinite(num)) {
        return {
            valid: false,
            error: '有効な数値を入力してください'
        };
    }

    // ③ 0以下はNG（−100万円の年収などはありえない）
    if (num <= 0) {
        return {
            valid: false,
            error: '0より大きい数値を入力してください'
        };
    }

    // ④ 現実的にありえないほど大きすぎる年収も一応はじく
    // 例：10億万円など、明らかに桁を間違えている可能性がある
    if (num > 100000) {
        return {
            valid: false,
            error: '現実的な年収を入力してください（100,000万円以下）'
        };
    }

    // ここまで全部通過したら「問題なし」
    // 例：注文用紙はちゃんと書けているので、キッチンに回せる
    return {
        valid: true,
        error: null
    };
}
