// ============================================================
// categories.js
// 年収から「どの区分（ア〜エ）か？」と、その区分の内容を教えるファイル
// アナロジー：レストランの『コースを決めるシェフ』と『メニュー表』
// ============================================================

/**
 * 年収から高額療養費の区分（ア・イ・ウ・エ）を判定する関数
 * 
 * @param {number} income - 数値としての年収（400 など）
 * @returns {'ア' | 'イ' | 'ウ' | 'エ'} - 区分
 * 
 * イメージ：
 *   - 年収が高い → 「アコース」
 *   - その次 → 「イコース」
 *   - 中くらい → 「ウコース」
 *   - 低め → 「エコース」
 */
function determineCategory(income) {
    // 一番上のランク：年収1,160万円以上
    if (income >= 1160) return 'ア';

    // その次：770〜1,160万円未満
    if (income >= 770) return 'イ';

    // さらにその次：370〜770万円未満
    if (income >= 370) return 'ウ';

    // それ以外（370万円未満）は「エ」
    return 'エ';
}

/**
 * 区分ごとの自己負担限度額や多数該当時の金額を返す関数
 * 
 * @param {'ア' | 'イ' | 'ウ' | 'エ'} category - 区分
 * @returns {{ limit: string, tasuGaito: string }}
 * 
 * イメージ：
 *   - メニュー表の「Aコース：◯◯円」「Bコース：◯◯円」に相当
 *   - 区分ごとに「基本の自己負担」と「多数該当時の自己負担」をセットで持っている
 */
function getCategoryDetails(category) {
    // 区分ごとの情報をまとめて持っておく「メニュー表」
    const details = {
        'ア': {
            // 基本の自己負担限度額
            limit: '252,600円+（医療費-842,000円）×1%',
            // 多数該当のときの自己負担
            tasuGaito: '140,100円'
        },
        'イ': {
            limit: '167,400円+（医療費-558,000円）×1%',
            tasuGaito: '93,000円'
        },
        'ウ': {
            limit: '80,100円+（医療費-267,000円）×1%',
            tasuGaito: '44,400円'
        },
        'エ': {
            limit: '57,600円',
            tasuGaito: '44,400円'
        }
    };

    // もらった区分（category）に対応するメニューを返す
    // 例：category = 'ウ' → details['ウ'] を返す
    return details[category];
}
